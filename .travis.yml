language: go
sudo: false
go:
  - 1.4

env:
  - PATH="${PATH}:${HOME}/.local/bin"

addons:
  apt:
    packages:
    - libpcap-dev

install:
  - go clean -i net
  - go install -tags netgo std
  - pip install --user --upgrade gcloud gsutil
  - openssl aes-256-cbc
    -K $encrypted_f8331cf19397_key -iv $encrypted_f8331cf19397_iv
    -in .boto.enc -out $HOME/.boto -d
  - make travis

script:
  - bin/lint .
  - make tests

after_success:
  - go get github.com/mattn/goveralls
  - $HOME/gopath/bin/goveralls -coverprofile=profile.cov -service=travis-ci
  - site/build-and-publish.sh
